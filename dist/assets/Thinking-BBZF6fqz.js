import{_ as E,u as M,c as o,r as G,o as H,a as J,b as K,d as i,e as t,f as a,t as r,w as c,g as d,h as w,i as f,F as T,j as A,k as O,l as u,n as W}from"./index-Cfond06q.js";import{u as X}from"./record-DKoSVIP3.js";const Y={class:"thinking"},Z={class:"container"},ss={class:"thinking-header"},es={class:"thinking-content"},ts={class:"questions-section"},ns={key:0,class:"loading"},os={key:1,class:"no-questions"},is={key:2,class:"current-question"},us={class:"question-navigator"},as={class:"question-list"},rs=["onClick"],ls={class:"question-nav-number"},cs={class:"question-nav-content"},ds={class:"question-item"},vs={class:"question-header"},gs={class:"question-number"},_s={class:"question-content"},ps={key:0,class:"counter-answer"},ms={class:"counter-answer-content"},ks={class:"question-navigation"},ws={key:3,class:"suggestion-prompt"},hs={class:"prompt-actions"},ys={key:4,class:"suggestions-section"},fs={class:"suggestions-list"},qs={class:"suggestion-number"},Cs={class:"suggestion-content"},Qs={class:"actions-section"},Ss={__name:"Thinking",setup(bs){const _=J(),s=M(),x=X(),p=o(()=>s.currentTopic),h=o(()=>s.currentTopicType),N=o(()=>s.questions),I=o(()=>s.answers),q=o(()=>s.currentQuestion),y=o(()=>s.currentQuestionIndex),m=o(()=>s.isLoading),C=o(()=>s.hasNextQuestion);o(()=>s.isLastQuestion);const V=o(()=>s.showSuggestionPrompt),Q=o(()=>s.suggestions),S=o(()=>s.counterAnswer),n=G(""),b=async()=>{if(!p.value){_.push("/");return}try{await s.generateFirstQuestion(p.value,h.value)}catch(k){console.error("生成第一个问题失败:",k),alert("生成问题失败，请返回首页重新尝试"),_.push("/")}},B=async()=>{n.value.trim()&&(await s.generateNextQuestion(n.value),n.value="")},F=()=>{s.goToPreviousQuestion(),n.value=s.currentAnswer||""},L=k=>{n.value.trim()&&s.saveCurrentAnswer(n.value),s.currentQuestionIndex=k,n.value=s.currentAnswer||""},P=()=>{s.saveCurrentAnswer(n.value),s.saveSession()},R=async()=>{await s.generateSuggestions()},z=()=>{s.skipSuggestions()},U=()=>{s.questions.length!==0&&(x.addRecord({topic:p.value,topicType:h.value,questions:s.questions,answers:s.answers}),_.push("/records"))};return H(async()=>{if(s.restoreSession(),!p.value){_.push("/");return}s.questions.length===0&&await b(),n.value=s.currentAnswer||""}),K(()=>{s.saveSession()}),(k,e)=>{const $=w("el-tag"),j=w("el-skeleton"),v=w("el-button"),D=w("el-input");return u(),i("div",Y,[t("div",Z,[t("div",ss,[t("h2",null,r(p.value),1),a($,{size:"small"},{default:c(()=>[d(r(h.value),1)]),_:1})]),t("div",es,[t("div",ts,[e[11]||(e[11]=t("h3",null,"苏格拉底的提问",-1)),m.value?(u(),i("div",ns,[a(j,{rows:3,animated:""})])):q.value?(u(),i("div",is,[t("div",us,[e[4]||(e[4]=t("h4",null,"问题导航",-1)),t("div",as,[(u(!0),i(T,null,A(N.value,(g,l)=>(u(),i("div",{key:l,class:W(["question-nav-item",{active:l===y.value,answered:I.value[l]}]),onClick:Ts=>L(l)},[t("span",ls,r(l+1),1),t("span",cs,r(g.substring(0,30))+"...",1)],10,rs))),128))])]),t("div",ds,[t("div",vs,[t("div",gs,r(y.value+1),1),t("div",_s,r(q.value),1)]),S.value?(u(),i("div",ps,[e[5]||(e[5]=t("div",{class:"counter-answer-label"},"AI回答：",-1)),t("div",ms,r(S.value),1)])):f("",!0),a(D,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=g=>n.value=g),placeholder:"请输入您的回答...",type:"textarea",rows:3,resize:"none",onInput:P},null,8,["modelValue"])]),t("div",ks,[a(v,{type:"default",onClick:F,disabled:y.value===0||m.value},{default:c(()=>[...e[6]||(e[6]=[d(" 上一个问题 ",-1)])]),_:1},8,["disabled"]),a(v,{type:"primary",onClick:B,loading:m.value,disabled:!n.value.trim()&&C.value||m.value},{default:c(()=>[d(r(C.value?"下一个问题":"完成思考"),1)]),_:1},8,["loading","disabled"])])])):(u(),i("div",os,[e[3]||(e[3]=t("p",null,'暂无提问，请点击"开始思考"按钮',-1)),a(v,{type:"primary",onClick:b},{default:c(()=>[...e[2]||(e[2]=[d("开始思考",-1)])]),_:1})])),V.value?(u(),i("div",ws,[e[9]||(e[9]=t("div",{class:"prompt-content"},[t("p",null,"您已经完成了所有问题的回答。"),t("p",null,"是否想听一听我的建议？")],-1)),t("div",hs,[a(v,{type:"primary",onClick:R,loading:m.value},{default:c(()=>[...e[7]||(e[7]=[d(" 想听建议 ",-1)])]),_:1},8,["loading"]),a(v,{onClick:z},{default:c(()=>[...e[8]||(e[8]=[d("不需要，谢谢",-1)])]),_:1})])])):f("",!0),Q.value.length>0?(u(),i("div",ys,[e[10]||(e[10]=t("h4",null,"AI建议",-1)),t("div",fs,[(u(!0),i(T,null,A(Q.value,(g,l)=>(u(),i("div",{key:l,class:"suggestion-item"},[t("div",qs,r(l+1),1),t("div",Cs,r(g),1)]))),128))])])):f("",!0)]),t("div",Qs,[a(v,{onClick:U},{default:c(()=>[...e[12]||(e[12]=[d("保存记录",-1)])]),_:1}),a(v,{onClick:e[1]||(e[1]=g=>O(_).back())},{default:c(()=>[...e[13]||(e[13]=[d("返回首页",-1)])]),_:1})])])])])}}},Ns=E(Ss,[["__scopeId","data-v-3ac511a7"]]);export{Ns as default};
