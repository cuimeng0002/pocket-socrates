import{$ as D,o as U,v as Y,k as t,A as Z,f as j,N as H,E as h,F as l,a as i,z as a,G as u,b as o,l as c,m as v,r as f,B as I,y as Q,M as J,s as K}from"./index-Bi_O0Ifp.js";import{o as O}from"./record-AmF9OWS7-D1muATjG-D2PamTer-fFwh1RM7-B2arVmeC-DRBkTQJD-C49oxg9R.js";const W={class:"thinking"},X={class:"container"},ss={class:"thinking-header"},es={class:"thinking-content"},as={class:"questions-section"},ns={key:0,class:"loading"},ts={key:1,class:"no-questions"},ls={key:2,class:"current-question"},is={class:"question-navigator"},us={class:"question-list"},os=["onClick"],rs={class:"question-nav-number"},cs={class:"question-nav-content"},vs={class:"question-item"},ds={class:"question-header"},gs={class:"question-number"},ps={class:"question-content"},ms={key:0,class:"counter-answer"},ys={class:"counter-answer-content"},ks={class:"question-navigation"},hs={key:3,class:"suggestion-prompt"},ws={class:"prompt-actions"},qs={key:4,class:"suggestions-section"},fs={class:"suggestions-list"},bs={class:"suggestion-number"},_s={class:"suggestion-content"},Cs={class:"actions-section"},As={__name:"Thinking",setup($s){const p=U(),s=Y(),S=O(),m=t(()=>s.currentTopic),w=t(()=>s.currentTopicType),x=t(()=>s.questions),T=t(()=>s.answers),b=t(()=>s.currentQuestion),q=t(()=>s.currentQuestionIndex),y=t(()=>s.isLoading),_=t(()=>s.hasNextQuestion);t(()=>s.isLastQuestion);const E=t(()=>s.showSuggestionPrompt),C=t(()=>s.suggestions),A=t(()=>s.counterAnswer),n=Z(""),$=async()=>{if(!m.value){p.push("/");return}try{await s.generateFirstQuestion(m.value,w.value)}catch(k){console.error("生成第一个问题失败:",k),alert("生成问题失败，请返回首页重新尝试"),p.push("/")}},N=async()=>{n.value.trim()&&(await s.generateNextQuestion(n.value),n.value="")},z=()=>{s.goToPreviousQuestion(),n.value=s.currentAnswer||""},V=k=>{n.value.trim()&&s.saveCurrentAnswer(n.value),s.currentQuestionIndex=k,n.value=s.currentAnswer||""},F=()=>{s.saveCurrentAnswer(n.value),s.saveSession()},L=async()=>{await s.generateSuggestions()},P=()=>{s.skipSuggestions()},B=()=>{s.questions.length!==0&&(S.addRecord({topic:m.value,topicType:w.value,questions:s.questions,answers:s.answers}),p.push("/records"))};return j(async()=>{if(s.restoreSession(),!m.value){p.push("/");return}s.questions.length===0&&await $(),n.value=s.currentAnswer||""}),H(()=>{s.saveSession()}),(k,e)=>{const G=h("el-tag"),M=h("el-skeleton"),d=h("el-button"),R=h("el-input");return i(),l("div",W,[a("div",X,[a("div",ss,[a("h2",null,o(m.value),1),u(G,{size:"small"},{default:c(()=>[v(o(w.value),1)]),_:1})]),a("div",es,[a("div",as,[e[11]||(e[11]=a("h3",null,"苏格拉底的提问",-1)),y.value?(i(),l("div",ns,[u(M,{rows:3,animated:""})])):b.value?(i(),l("div",ls,[a("div",is,[e[4]||(e[4]=a("h4",null,"问题导航",-1)),a("div",us,[(i(!0),l(I,null,Q(x.value,(g,r)=>(i(),l("div",{key:r,class:J(["question-nav-item",{active:r===q.value,answered:T.value[r]}]),onClick:Is=>V(r)},[a("span",rs,o(r+1),1),a("span",cs,o(g.substring(0,30))+"...",1)],10,os))),128))])]),a("div",vs,[a("div",ds,[a("div",gs,o(q.value+1),1),a("div",ps,o(b.value),1)]),A.value?(i(),l("div",ms,[e[5]||(e[5]=a("div",{class:"counter-answer-label"},"AI回答：",-1)),a("div",ys,o(A.value),1)])):f("",!0),u(R,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=g=>n.value=g),placeholder:"请输入您的回答...",type:"textarea",rows:3,resize:"none",onInput:F},null,8,["modelValue"])]),a("div",ks,[u(d,{type:"default",onClick:z,disabled:q.value===0||y.value},{default:c(()=>[...e[6]||(e[6]=[v(" 上一个问题 ",-1)])]),_:1},8,["disabled"]),u(d,{type:"primary",onClick:N,loading:y.value,disabled:!n.value.trim()&&_.value||y.value},{default:c(()=>[v(o(_.value?"下一个问题":"完成思考"),1)]),_:1},8,["loading","disabled"])])])):(i(),l("div",ts,[e[3]||(e[3]=a("p",null,'暂无提问，请点击"开始思考"按钮',-1)),u(d,{type:"primary",onClick:$},{default:c(()=>[...e[2]||(e[2]=[v("开始思考",-1)])]),_:1})])),E.value?(i(),l("div",hs,[e[9]||(e[9]=a("div",{class:"prompt-content"},[a("p",null,"您已经完成了所有问题的回答。"),a("p",null,"是否想听一听我的建议？")],-1)),a("div",ws,[u(d,{type:"primary",onClick:L,loading:y.value},{default:c(()=>[...e[7]||(e[7]=[v(" 想听建议 ",-1)])]),_:1},8,["loading"]),u(d,{onClick:P},{default:c(()=>[...e[8]||(e[8]=[v("不需要，谢谢",-1)])]),_:1})])])):f("",!0),C.value.length>0?(i(),l("div",qs,[e[10]||(e[10]=a("h4",null,"AI建议",-1)),a("div",fs,[(i(!0),l(I,null,Q(C.value,(g,r)=>(i(),l("div",{key:r,class:"suggestion-item"},[a("div",bs,o(r+1),1),a("div",_s,o(g),1)]))),128))])])):f("",!0)]),a("div",Cs,[u(d,{onClick:B},{default:c(()=>[...e[12]||(e[12]=[v("保存记录",-1)])]),_:1}),u(d,{onClick:e[1]||(e[1]=g=>K(p).back())},{default:c(()=>[...e[13]||(e[13]=[v("返回首页",-1)])]),_:1})])])])])}}},xs=D(As,[["__scopeId","data-v-3ac511a7"]]);export{xs as default};
