import{w as Y,P as B,Y as W,k as t,A as X,f as j,R as D,E as w,F as l,a as i,z as a,G as u,b as o,l as c,m as v,r as f,c as x,d as I,N as H,s as J}from"./index-C2HU63rQ.js";import{o as K}from"./record-AmF9OWS7-D1muATjG-D2PamTer.js";const M={class:"thinking"},Z={class:"container"},ss={class:"thinking-header"},es={class:"thinking-content"},as={class:"questions-section"},ns={key:0,class:"loading"},ts={key:1,class:"no-questions"},ls={key:2,class:"current-question"},is={class:"question-navigator"},us={class:"question-list"},os=["onClick"],rs={class:"question-nav-number"},cs={class:"question-nav-content"},vs={class:"question-item"},ds={class:"question-header"},gs={class:"question-number"},ps={class:"question-content"},ms={key:0,class:"counter-answer"},ks={class:"counter-answer-content"},hs={class:"question-navigation"},ws={key:3,class:"suggestion-prompt"},ys={class:"prompt-actions"},qs={key:4,class:"suggestions-section"},fs={class:"suggestions-list"},bs={class:"suggestion-number"},_s={class:"suggestion-content"},Cs={class:"actions-section"},As={__name:"Thinking",setup(Qs){const p=B(),s=W(),$=K(),m=t(()=>s.currentTopic),y=t(()=>s.currentTopicType),S=t(()=>s.questions),P=t(()=>s.answers),b=t(()=>s.currentQuestion),q=t(()=>s.currentQuestionIndex),k=t(()=>s.isLoading),_=t(()=>s.hasNextQuestion);t(()=>s.isLastQuestion);const T=t(()=>s.showSuggestionPrompt),C=t(()=>s.suggestions),A=t(()=>s.counterAnswer),n=X(""),Q=async()=>{if(!m.value){p.push("/");return}try{await s.generateFirstQuestion(m.value,y.value)}catch(h){console.error("生成第一个问题失败:",h),alert("生成问题失败，请返回首页重新尝试"),p.push("/")}},z=async()=>{n.value.trim()&&(await s.generateNextQuestion(n.value),n.value="")},E=()=>{s.goToPreviousQuestion(),n.value=s.currentAnswer||""},N=h=>{n.value.trim()&&s.saveCurrentAnswer(n.value),s.currentQuestionIndex=h,n.value=s.currentAnswer||""},R=()=>{s.saveCurrentAnswer(n.value),s.saveSession()},V=async()=>{await s.generateSuggestions()},F=()=>{s.skipSuggestions()},L=()=>{s.questions.length!==0&&($.addRecord({topic:m.value,topicType:y.value,questions:s.questions,answers:s.answers}),p.push("/records"))};return j(async()=>{if(s.restoreSession(),!m.value){p.push("/");return}s.questions.length===0&&await Q(),n.value=s.currentAnswer||""}),D(()=>{s.saveSession()}),(h,e)=>{const O=w("el-tag"),G=w("el-skeleton"),d=w("el-button"),U=w("el-input");return i(),l("div",M,[a("div",Z,[a("div",ss,[a("h2",null,o(m.value),1),u(O,{size:"small"},{default:c(()=>[v(o(y.value),1)]),_:1})]),a("div",es,[a("div",as,[e[11]||(e[11]=a("h3",null,"苏格拉底的提问",-1)),k.value?(i(),l("div",ns,[u(G,{rows:3,animated:""})])):b.value?(i(),l("div",ls,[a("div",is,[e[4]||(e[4]=a("h4",null,"问题导航",-1)),a("div",us,[(i(!0),l(x,null,I(S.value,(g,r)=>(i(),l("div",{key:r,class:H(["question-nav-item",{active:r===q.value,answered:P.value[r]}]),onClick:xs=>N(r)},[a("span",rs,o(r+1),1),a("span",cs,o(g.substring(0,30))+"...",1)],10,os))),128))])]),a("div",vs,[a("div",ds,[a("div",gs,o(q.value+1),1),a("div",ps,o(b.value),1)]),A.value?(i(),l("div",ms,[e[5]||(e[5]=a("div",{class:"counter-answer-label"},"AI回答：",-1)),a("div",ks,o(A.value),1)])):f("",!0),u(U,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=g=>n.value=g),placeholder:"请输入您的回答...",type:"textarea",rows:3,resize:"none",onInput:R},null,8,["modelValue"])]),a("div",hs,[u(d,{type:"default",onClick:E,disabled:q.value===0||k.value},{default:c(()=>[...e[6]||(e[6]=[v(" 上一个问题 ",-1)])]),_:1},8,["disabled"]),u(d,{type:"primary",onClick:z,loading:k.value,disabled:!n.value.trim()&&_.value||k.value},{default:c(()=>[v(o(_.value?"下一个问题":"完成思考"),1)]),_:1},8,["loading","disabled"])])])):(i(),l("div",ts,[e[3]||(e[3]=a("p",null,'暂无提问，请点击"开始思考"按钮',-1)),u(d,{type:"primary",onClick:Q},{default:c(()=>[...e[2]||(e[2]=[v("开始思考",-1)])]),_:1})])),T.value?(i(),l("div",ws,[e[9]||(e[9]=a("div",{class:"prompt-content"},[a("p",null,"您已经完成了所有问题的回答。"),a("p",null,"是否想听一听我的建议？")],-1)),a("div",ys,[u(d,{type:"primary",onClick:V,loading:k.value},{default:c(()=>[...e[7]||(e[7]=[v(" 想听建议 ",-1)])]),_:1},8,["loading"]),u(d,{onClick:F},{default:c(()=>[...e[8]||(e[8]=[v("不需要，谢谢",-1)])]),_:1})])])):f("",!0),C.value.length>0?(i(),l("div",qs,[e[10]||(e[10]=a("h4",null,"AI建议",-1)),a("div",fs,[(i(!0),l(x,null,I(C.value,(g,r)=>(i(),l("div",{key:r,class:"suggestion-item"},[a("div",bs,o(r+1),1),a("div",_s,o(g),1)]))),128))])])):f("",!0)]),a("div",Cs,[u(d,{onClick:L},{default:c(()=>[...e[12]||(e[12]=[v("保存记录",-1)])]),_:1}),u(d,{onClick:e[1]||(e[1]=g=>J(p).back())},{default:c(()=>[...e[13]||(e[13]=[v("返回首页",-1)])]),_:1})])])])])}}},Ss=Y(As,[["__scopeId","data-v-3ac511a7"]]);export{Ss as default};
