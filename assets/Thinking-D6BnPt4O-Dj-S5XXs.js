import{w as j,F as D,G as H,S as t,A as Y,f as Z,R as E,_ as y,B as l,$ as i,H as a,a as u,T as o,l as c,h as v,s as f,z as S,b as T,P as J,r as K}from"./index-CZLwHkqG.js";import{r as M}from"./record-AmF9OWS7-D1muATjG.js";const W={class:"thinking"},X={class:"container"},ss={class:"thinking-header"},es={class:"thinking-content"},as={class:"questions-section"},ns={key:0,class:"loading"},ts={key:1,class:"no-questions"},ls={key:2,class:"current-question"},is={class:"question-navigator"},us={class:"question-list"},os=["onClick"],rs={class:"question-nav-number"},cs={class:"question-nav-content"},vs={class:"question-item"},ds={class:"question-header"},gs={class:"question-number"},ps={class:"question-content"},ms={key:0,class:"counter-answer"},ks={class:"counter-answer-content"},hs={class:"question-navigation"},ys={key:3,class:"suggestion-prompt"},ws={class:"prompt-actions"},qs={key:4,class:"suggestions-section"},fs={class:"suggestions-list"},_s={class:"suggestion-number"},bs={class:"suggestion-content"},Cs={class:"actions-section"},Qs={__name:"Thinking",setup(As){const p=D(),s=H(),x=M(),m=t(()=>s.currentTopic),w=t(()=>s.currentTopicType),I=t(()=>s.questions),$=t(()=>s.answers),_=t(()=>s.currentQuestion),q=t(()=>s.currentQuestionIndex),k=t(()=>s.isLoading),b=t(()=>s.hasNextQuestion);t(()=>s.isLastQuestion);const z=t(()=>s.showSuggestionPrompt),C=t(()=>s.suggestions),Q=t(()=>s.counterAnswer),n=Y(""),A=async()=>{if(!m.value){p.push("/");return}try{await s.generateFirstQuestion(m.value,w.value)}catch(h){console.error("生成第一个问题失败:",h),alert("生成问题失败，请返回首页重新尝试"),p.push("/")}},F=async()=>{n.value.trim()&&(await s.generateNextQuestion(n.value),n.value="")},N=()=>{s.goToPreviousQuestion(),n.value=s.currentAnswer||""},P=h=>{n.value.trim()&&s.saveCurrentAnswer(n.value),s.currentQuestionIndex=h,n.value=s.currentAnswer||""},R=()=>{s.saveCurrentAnswer(n.value),s.saveSession()},V=async()=>{await s.generateSuggestions()},G=()=>{s.skipSuggestions()},L=()=>{s.questions.length!==0&&(x.addRecord({topic:m.value,topicType:w.value,questions:s.questions,answers:s.answers}),p.push("/records"))};return Z(async()=>{if(s.restoreSession(),!m.value){p.push("/");return}s.questions.length===0&&await A(),n.value=s.currentAnswer||""}),E(()=>{s.saveSession()}),(h,e)=>{const B=y("el-tag"),O=y("el-skeleton"),d=y("el-button"),U=y("el-input");return i(),l("div",W,[a("div",X,[a("div",ss,[a("h2",null,o(m.value),1),u(B,{size:"small"},{default:c(()=>[v(o(w.value),1)]),_:1})]),a("div",es,[a("div",as,[e[11]||(e[11]=a("h3",null,"苏格拉底的提问",-1)),k.value?(i(),l("div",ns,[u(O,{rows:3,animated:""})])):_.value?(i(),l("div",ls,[a("div",is,[e[4]||(e[4]=a("h4",null,"问题导航",-1)),a("div",us,[(i(!0),l(S,null,T(I.value,(g,r)=>(i(),l("div",{key:r,class:J(["question-nav-item",{active:r===q.value,answered:$.value[r]}]),onClick:Ss=>P(r)},[a("span",rs,o(r+1),1),a("span",cs,o(g.substring(0,30))+"...",1)],10,os))),128))])]),a("div",vs,[a("div",ds,[a("div",gs,o(q.value+1),1),a("div",ps,o(_.value),1)]),Q.value?(i(),l("div",ms,[e[5]||(e[5]=a("div",{class:"counter-answer-label"},"AI回答：",-1)),a("div",ks,o(Q.value),1)])):f("",!0),u(U,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=g=>n.value=g),placeholder:"请输入您的回答...",type:"textarea",rows:3,resize:"none",onInput:R},null,8,["modelValue"])]),a("div",hs,[u(d,{type:"default",onClick:N,disabled:q.value===0||k.value},{default:c(()=>[...e[6]||(e[6]=[v(" 上一个问题 ",-1)])]),_:1},8,["disabled"]),u(d,{type:"primary",onClick:F,loading:k.value,disabled:!n.value.trim()&&b.value||k.value},{default:c(()=>[v(o(b.value?"下一个问题":"完成思考"),1)]),_:1},8,["loading","disabled"])])])):(i(),l("div",ts,[e[3]||(e[3]=a("p",null,'暂无提问，请点击"开始思考"按钮',-1)),u(d,{type:"primary",onClick:A},{default:c(()=>[...e[2]||(e[2]=[v("开始思考",-1)])]),_:1})])),z.value?(i(),l("div",ys,[e[9]||(e[9]=a("div",{class:"prompt-content"},[a("p",null,"您已经完成了所有问题的回答。"),a("p",null,"是否想听一听我的建议？")],-1)),a("div",ws,[u(d,{type:"primary",onClick:V,loading:k.value},{default:c(()=>[...e[7]||(e[7]=[v(" 想听建议 ",-1)])]),_:1},8,["loading"]),u(d,{onClick:G},{default:c(()=>[...e[8]||(e[8]=[v("不需要，谢谢",-1)])]),_:1})])])):f("",!0),C.value.length>0?(i(),l("div",qs,[e[10]||(e[10]=a("h4",null,"AI建议",-1)),a("div",fs,[(i(!0),l(S,null,T(C.value,(g,r)=>(i(),l("div",{key:r,class:"suggestion-item"},[a("div",_s,o(r+1),1),a("div",bs,o(g),1)]))),128))])])):f("",!0)]),a("div",Cs,[u(d,{onClick:L},{default:c(()=>[...e[12]||(e[12]=[v("保存记录",-1)])]),_:1}),u(d,{onClick:e[1]||(e[1]=g=>K(p).back())},{default:c(()=>[...e[13]||(e[13]=[v("返回首页",-1)])]),_:1})])])])])}}},Is=j(Qs,[["__scopeId","data-v-3ac511a7"]]);export{Is as default};
