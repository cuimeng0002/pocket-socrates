import{I as M,e as P,N as v,f as W,E as n,F as b,a as r,z as s,G as l,n as a,s as $,v as N,m as c,b as y,r as O,i as D,D as X,y as Y,l as V,h as Z}from"./index-BBZOdHWx.js";const ee={class:"settings"},le={class:"container"},ae={class:"actions"},te={class:"feedback-list-section"},se={class:"toggle-icon"},ue={key:0,class:"feedback-list"},ne={key:0,class:"empty-feedback"},oe={class:"feedback-item-header"},ce={class:"feedback-item-content"},de={key:0,class:"feedback-item-contact"},ie={__name:"Settings",setup(re){const J=P(),o=v({depth:2,count:5,style:"严谨"}),m=v(null),d=v({type:"",content:"",contact:""}),g=v(!1),p=v([]),_=v(!1),I=()=>{localStorage.setItem("aiSettings",JSON.stringify(o.value)),V.success("设置已保存"),console.log("设置已保存:",o.value)},U=()=>{o.value={depth:2,count:5,style:"严谨"}},E=()=>{I(),J.push("/thinking")},A=()=>{const u=localStorage.getItem("aiSettings");u&&(o.value=JSON.parse(u))},x=()=>{const u=localStorage.getItem("feedbacks");u&&(p.value=JSON.parse(u).reverse())};W(()=>{A(),x()});const F=async()=>{if(m.value)try{await m.value.validate(),g.value=!0,setTimeout(()=>{const u=JSON.parse(localStorage.getItem("feedbacks")||"[]");u.push({...d.value,id:Date.now(),createdAt:new Date().toISOString()}),localStorage.setItem("feedbacks",JSON.stringify(u)),V.success("反馈提交成功，感谢您的参与！"),w(),x(),g.value=!1},1e3)}catch(u){console.error("表单验证失败:",u),g.value=!1}},w=()=>{m.value&&m.value.resetFields(),d.value={type:"",content:"",contact:""}},T=u=>{Z.confirm("确定要删除这条反馈吗？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{p.value=p.value.filter(e=>e.id!==u),localStorage.setItem("feedbacks",JSON.stringify(p.value)),V.success("反馈已删除")}).catch(()=>{})},q=()=>{_.value=!_.value},z=u=>({suggestion:"功能建议",bug:"bug报告",experience:"体验优化",other:"其他"})[u]||u,B=u=>new Date(u).toLocaleString();return(u,e)=>{const Q=n("el-slider"),i=n("el-form-item"),j=n("el-input-number"),S=n("el-radio"),G=n("el-radio-group"),f=n("el-button"),k=n("el-card"),h=n("el-option"),L=n("el-select"),C=n("el-input"),R=n("el-tag"),H=n("el-timeline-item"),K=n("el-timeline");return r(),b("div",ee,[s("div",le,[e[20]||(e[20]=s("h2",null,"设置",-1)),l(k,{class:"settings-card"},{default:a(()=>[e[12]||(e[12]=s("h3",null,"AI设置",-1)),l($(N),{"label-width":"120px"},{default:a(()=>[l(i,{label:"提问深度"},{default:a(()=>[l(Q,{modelValue:o.value.depth,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.depth=t),min:1,max:3,marks:{1:"基础",2:"进阶",3:"专家"}},null,8,["modelValue"])]),_:1}),l(i,{label:"提问数量"},{default:a(()=>[l(j,{modelValue:o.value.count,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.count=t),min:3,max:10,step:1},null,8,["modelValue"])]),_:1}),l(i,{label:"提问风格"},{default:a(()=>[l(G,{modelValue:o.value.style,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.style=t)},{default:a(()=>[l(S,{label:"严谨"},{default:a(()=>[...e[6]||(e[6]=[c("严谨",-1)])]),_:1}),l(S,{label:"轻松"},{default:a(()=>[...e[7]||(e[7]=[c("轻松",-1)])]),_:1}),l(S,{label:"幽默"},{default:a(()=>[...e[8]||(e[8]=[c("幽默",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),s("div",ae,[l(f,{type:"primary",onClick:I},{default:a(()=>[...e[9]||(e[9]=[c("保存设置",-1)])]),_:1}),l(f,{onClick:U},{default:a(()=>[...e[10]||(e[10]=[c("重置",-1)])]),_:1}),l(f,{onClick:E},{default:a(()=>[...e[11]||(e[11]=[c("返回对话",-1)])]),_:1})])]),_:1}),l(k,{class:"settings-card"},{default:a(()=>[e[18]||(e[18]=s("h3",null,"意见反馈",-1)),l($(N),{"label-width":"120px",ref_key:"feedbackFormRef",ref:m,model:d.value,"status-icon":""},{default:a(()=>[l(i,{label:"反馈类型",prop:"type",required:""},{default:a(()=>[l(L,{modelValue:d.value.type,"onUpdate:modelValue":e[3]||(e[3]=t=>d.value.type=t),placeholder:"请选择反馈类型"},{default:a(()=>[l(h,{label:"功能建议",value:"suggestion"}),l(h,{label:"bug报告",value:"bug"}),l(h,{label:"体验优化",value:"experience"}),l(h,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"反馈内容",prop:"content",required:""},{default:a(()=>[l(C,{modelValue:d.value.content,"onUpdate:modelValue":e[4]||(e[4]=t=>d.value.content=t),type:"textarea",rows:5,placeholder:"请详细描述您的反馈内容"},null,8,["modelValue"])]),_:1}),l(i,{label:"联系方式",prop:"contact"},{default:a(()=>[l(C,{modelValue:d.value.contact,"onUpdate:modelValue":e[5]||(e[5]=t=>d.value.contact=t),placeholder:"请留下您的联系方式（可选）"},null,8,["modelValue"])]),_:1}),l(i,null,{default:a(()=>[l(f,{type:"primary",onClick:F,loading:g.value},{default:a(()=>[c(y(g.value?"提交中...":"提交反馈"),1)]),_:1},8,["loading"]),l(f,{onClick:w},{default:a(()=>[...e[13]||(e[13]=[c("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),s("div",te,[s("div",{class:"feedback-list-header",onClick:q},[e[14]||(e[14]=s("h4",null,"我的反馈列表",-1)),s("span",se,y(_.value?"▼":"▶"),1)]),_.value?(r(),b("div",ue,[p.value.length===0?(r(),b("div",ne,[...e[15]||(e[15]=[s("p",null,"暂无反馈记录",-1)])])):(r(),D(K,{key:1},{default:a(()=>[(r(!0),b(X,null,Y(p.value,t=>(r(),D(H,{key:t.id,timestamp:B(t.createdAt)},{default:a(()=>[l(k,{class:"feedback-item-card"},{default:a(()=>[s("div",oe,[l(R,{type:t.type==="bug"?"danger":t.type==="suggestion"?"success":"info"},{default:a(()=>[c(y(z(t.type)),1)]),_:2},1032,["type"]),l(f,{type:"danger",size:"small",circle:"",onClick:pe=>T(t.id),title:"删除反馈"},{default:a(()=>[...e[16]||(e[16]=[s("i",{class:"el-icon-delete"},null,-1)])]),_:1},8,["onClick"])]),s("div",ce,y(t.content),1),t.contact?(r(),b("div",de,[e[17]||(e[17]=s("strong",null,"联系方式：",-1)),c(y(t.contact),1)])):O("",!0)]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1}))])):O("",!0)])]),_:1}),l(k,{class:"settings-card"},{default:a(()=>[...e[19]||(e[19]=[s("h3",null,"关于",-1),s("div",{class:"about-content"},[s("p",null,"口袋里的苏格拉底 v0.1.0"),s("p",null,"用提问引发深度思考"),s("p",null,"© 2025 口袋里的苏格拉底")],-1)])]),_:1})])])}}},ve=M(ie,[["__scopeId","data-v-58b55bd4"]]);export{ve as default};
